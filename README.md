# Golden Gate Assembly Tool

A golden gate assembly tool built on top of the [dnacauldron](https://github.com/Edinburgh-Genome-Foundry/DnaCauldron) library for automated DNA construct assembly.

## Overview

This tool processes golden gate assemblies based on assembly plans defined in CSV files. It uses the dnacauldron library to simulate and validate assemblies, generating detailed reports with visualization plots.

## Features

- **Assembly Plan Processing**: Reads assembly plans from `assembly.csv` files defining constructs and their components
- **MoClo Support**: Includes major MoClo plasmids for standardized assembly workflows
- **L2 Assembly Examples**: Contains example L2 assemblies for complex construct building
- **SLOT System**: Use `SLOT_N_START` and `SLOT_N_END` sequences around your constructs to treat them as L1 plasmids
- **Test Examples**: Provides `TEST_SLOT` assemblies as working examples
- **Comprehensive Reporting**: Generates assembly reports with mix graphs, part plots, fragment plots, and PDF documentation

## Installation

This project uses [uv](https://github.com/astral-sh/uv) for dependency management. First, install uv:

```bash
# Install uv
curl -LsSf https://astral.sh/uv/install.sh | sh
```

Then clone and set up the project:

```bash
git clone <repository-url>
cd golden-gate
```

## Usage

### Basic Assembly

Run the CLI tool with default settings (uses `data/input/assembly.csv` and plasmids from `data/input/`):

```bash
uv run python -m golden_gate.cli process
```

### Custom Assembly

Specify custom paths for assembly plan and plasmid directories:

```bash
uv run python -m golden_gate.cli process --assembly path/to/your/assembly.csv --plasmid path/to/plasmids/
```

### Command Options

- `--assembly`: Path to the assembly.csv file (default: `data/input/assembly.csv`)
- `--plasmid`: Path to plasmids folder(s) - can specify multiple (default: `data/input/`)
- `--logs`: Path to logs folder (default: `logs/`)

## File Structure

```
data/
├── input/
│   ├── assembly.csv          # Assembly plan definition
│   ├── MoCloOriginal/        # MoClo plasmid collection
│   │   ├── level_1/          # L1 plasmids
│   │   ├── level_2/          # L2 plasmids
│   │   └── level_2_linkers/  # L2 linker plasmids
│   ├── SLOTS/                # SLOT_N_START and SLOT_N_END sequences
│   └── TEST/                 # Example TEST_SLOT assemblies
└── output/
    └── assemblies/           # Generated assembly reports and results
```

## Assembly Plan Format

The `assembly.csv` file defines your assembly plan. Each row specifies:
- Assembly name
- Component plasmids
- Assembly parameters

## SLOT System

Use the SLOT system to create modular assemblies:

1. **SLOT Sequences**: `SLOT_N_START` and `SLOT_N_END` files define standardized entry/exit points, just put them before and after part of your sequence that you want to be inserted on L2 assembly
2. **Construct Integration**: Place these sequences around your constructs to make them behave like L1 plasmids
3. **Example Usage**: See `TEST_SLOT` plasmids `data/input/TEST/` to see how things will be inserted

## Output

The tool generates:
- Assembly simulation results
- Detailed reports with visualizations
- Mix graphs showing assembly strategy
- Part plots for individual components
- Fragment analysis plots
- PDF documentation

All outputs are saved to `data/output/assemblies/` with timestamps and assembly names.

### Example Assembly Report

Here's an example of the comprehensive reports generated by dnacauldron:

![Assembly Report Elements](https://github.com/Edinburgh-Genome-Foundry/DnaCauldron/raw/master/docs/_static/images/reports_elements.png)

The reports include visual representations of your assembly strategy, fragment analysis, and detailed documentation of the assembly process.

## Logging

Comprehensive logging is provided through eliot, with outputs to:
- Console (structured format)
- `logs/assembly.log` (human-readable)
- `logs/assembly.json` (structured JSON)

## Examples

### Testing with Provided Examples

Run the assembly without parameters

```bash
uv run assembly
```

This will process the default `assembly.csv` and demonstrate the SLOT system using the TEST examples.

## Supported File Formats

The tool accepts plasmid files in the following formats:
- `.gb`, `.gbk` (GenBank)
- `.fasta`, `.fa` (FASTA)
- `.dna` (SnapGene)

## Requirements

- Python 3.10+
- uv package manager
- dnacauldron library (automatically installed)
